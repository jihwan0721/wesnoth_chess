[scenario]
    id=round3
    name= _ "Round 3: Grandmaster Duel"
    map_data="{~add-ons/wesnoth-chess/maps/chess_8x8.map}"
    turn_limit=25

    [side]
        side=1
        controller=human
        team_name="white"
        gold=0
    [/side]

    [side]
        side=2
        controller=ai
        team_name="black"
        gold=0

        [ai]
            version=10719
            aggression=0.7
            caution=0.3
            grouping=off
        [/ai]
    [/side]

    [event]
        name=start
        [lua]
            code = <<
                local Eval = wesnoth.require "~add-ons/wesnoth-chess/core/eval.lua"
                local Search = wesnoth.require "~add-ons/wesnoth-chess/core/search.lua"
                wesnoth.message("Round 3", "AI is playing with 2-ply evaluation.")
            >>
        [/lua]
    [/event]

    # King death = final ending
    [event]
        name=die
        [filter]
            id="Chess_King"
        [/filter]

        [if]
            [variable]
                name=unit.side
                equals=1
            [/variable]
            [then]
                [endlevel]
                    result=defeat
                [/endlevel]
            [/then]
            [else]
                [endlevel]
                    result=victory
                    next_scenario=ending
                [/endlevel]
            [/else]
        [/if]
    [/event]

[/scenario]
